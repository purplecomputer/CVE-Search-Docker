# Use the latest Python image
FROM python:latest

# Set an environment variable with the directory
# where we'll be running the app
ENV APP /app

# Create the directory and instruct Docker to operate
# from there from now on
RUN mkdir $APP
RUN mkdir /mnt/cve_search
WORKDIR $APP

ARG REPO
ARG BRANCH

RUN echo "Using repo - branch: $REPO - $BRANCH"

RUN git clone -b $BRANCH --single-branch --depth=1 https://github.com/$REPO.git ./
RUN apt install aptitude -y
RUN aptitude install xargs
RUN sudo aptitude install -y < requirements.txt
RUN pip3 install -r requirements.txt
